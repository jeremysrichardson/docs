<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Launch Scenarios - FHIRcast</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Launch Scenarios";
    var mkdocs_page_input_path = "launch-scenarios.md";
    var mkdocs_page_url = "/launch-scenarios/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> FHIRcast</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Launch Scenarios</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#ehr-authorizes-app-to-synchronize">EHR authorizes app to synchronize</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#ehr-launch-user-ssos-into-app-from-ehr">EHR Launch: User SSO's into app from EHR</a></li>
        
            <li><a class="toctree-l3" href="#standalone-launch-user-authenticates-to-ehr-to-authorize-synchronization">Standalone launch: User authenticates to EHR to authorize synchronization</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">FHIRcast</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Launch Scenarios</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="ehr-authorizes-app-to-synchronize">EHR authorizes app to synchronize</h1>
<p>FHIRcast extends SMART on FHIR to support clinical context synchronization between disparate, full featured healthcare which cannot be embedded within one another. Two launch scenarios are supported. In all cases the app is authorized to synchronize to a user's session using the OAuth2.0 <code>fhircast</code> scope.</p>
<p>During the OAuth2.0 handshake, the app <a href="http://www.hl7.org/fhir/smart-app-launch/#2-ehr-evaluates-authorization-request-asking-for-end-user-input">requests and is granted</a> the <code>fhircast</code> scope. The EHR's authorization server returns the hub url and any relevant session topics as SMART launch parameters. </p>
<table>
<thead>
<tr>
<th>SMART launch parameter</th>
<th>Optionality</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cast-hub</code></td>
<td>Required</td>
<td>string</td>
<td>The base url of the EHR's hub.</td>
</tr>
<tr>
<td><code>cast-session</code></td>
<td>Optional</td>
<td>string or array</td>
<td>Zero, one or more session topic urls. The cast-session url is a unique, opaque identifier to the a user's session.</td>
</tr>
</tbody>
</table>
<p>The app requests the <code>fhircast</code> scope.</p>
<pre><code>Location: https://ehr/authorize?
            response_type=code&amp;
            client_id=app-client-id&amp;
            redirect_uri=https%3A%2F%2Fapp%2Fafter-auth&amp;
            launch=xyz123&amp;
            scope=fhircast+launch+patient%2FObservation.read+patient%2FPatient.read+openid+profile&amp;
            state=98wrghuwuogerg97&amp;
            aud=https://ehr/fhir
</code></pre>

<p>Following the OAuth2.0 handshake, the authorization server returns the FHIRcast SMART launch parameters alongside the access_token.</p>
<pre><code class="json">{
  &quot;access_token&quot;: &quot;i8hweunweunweofiwweoijewiwe&quot;,
  &quot;token_type&quot;: &quot;bearer&quot;,
  &quot;expires_in&quot;: 3600,
  &quot;scope&quot;: &quot;patient/Observation.read patient/Patient.read&quot;,
  &quot;state&quot;: &quot;98wrghuwuogerg97&quot;,
  &quot;intent&quot;: &quot;client-ui-name&quot;,
  &quot;patient&quot;:  &quot;123&quot;,
  &quot;encounter&quot;: &quot;456&quot;,
  &quot;cast-hub&quot; : &quot;https://hub.example.com&quot;,
  &quot;cast-session&quot;: &quot;https://hub.example.com/7jaa86kgdudewiaq0wtu&quot;
}
</code></pre>

<p>The app then <a href="../#app-subscribes-to-session">subscribes</a> to the identified session</p>
<p>Two different launch scenarios are supported. For each launch scenario, the app discovers the session topic to which it <a href="../#app-subscribes-to-session">subscribes</a>.</p>
<h2 id="ehr-launch-user-ssos-into-app-from-ehr">EHR Launch: User SSO's into app from EHR</h2>
<p>The simplest launch scenario is the <a href="http://www.hl7.org/fhir/smart-app-launch/#ehr-launch-sequence">SMART on FHIR EHR launch</a>, in which the app is launched from an authenticated EHR session. The app receives information about the user and session as part of the launch and subsequently subscribes to the launching user's session. </p>
<p>In this scenario, the EHR authorizes the app to synchronize. The EHR provides one or more session topics as SMART launch parameters that belong to the EHR's current user. </p>
<h2 id="standalone-launch-user-authenticates-to-ehr-to-authorize-synchronization">Standalone launch: User authenticates to EHR to authorize synchronization</h2>
<p>If the app can't be launched from the EHR, for example, it's opening on a different machine, it can use the standard <a href="http://www.hl7.org/fhir/smart-app-launch/#standalone-launch-sequence">SMART on FHIR standalone launch</a>. </p>
<p>In this scenario, the user authorizes the app to synchronize to her session by authenticating to the EHR's authorization server. The EHR provides one or more session topics as SMART launch parameters that belong to the authorizing user.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../about/" class="btn btn-neutral float-right" title="About">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../about/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
